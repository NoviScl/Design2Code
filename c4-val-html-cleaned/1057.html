<html>
 <head>
  <style>
  </style>
  <title>
   AT90LS8535 Digital Answering Machine
  </title>
 </head>
 <body link="#0000ff" vlink="#800080">
  <p align="Center">
   <font size="7">
    <b>
     AT90LS8535 Digital Answering Machine
    </b>
   </font>
  </p>
  <p align="Center">
   <font size="5">
    Final project &ndash;
    <a>
     EE476
Microcontroller Design Spring 1999
    </a>
    <br>
    <a>
     Brian Glassmeyer
    </a>
    and
    <a>
     Eric Melin
    </a>
   </font>
   <font size="4">
   </font>
  </p>
  <p align="Left">
   <b>
    Introduction
   </b>
  </p>
  <p align="Left">
   We were given the task of designing something cool using the AT90LS85835
8-bit microcontroller for our final project in EE476. We decided that an
answering machine was interesting because it involved interfacing many analog
parts, a reasonable amount of coding, and would leave us with a finished
product that actually does something.
  </p>
  <p>
  </p>
  <p>
   <b>
    High Level Design -
   </b>
  </p>
  <p>
   Our answering machine is designed to:
  </p>
  <ul>
   <li>
    Record &ndash; on phone pickup start recording
   </li>
   <li>
    Playback &ndash; on Button 7 push
   </li>
   <li>
    Stop Playback &ndash; on Button 6 push
   </li>
   <li>
    Skip Messages &ndash; on Button 5 push
   </li>
   <li>
    Delete Messages &ndash; on Button 4 push
   </li>
  </ul>
  <p>
   <b>
    Program/Hardware Design -
   </b>
  </p>
  <p>
   The main tasks in this design were to record voice and play it back, address
the SRAM, and store/read from the SRAM. We achieved recording by using
the ADC provided with the AVR microcontroller.
  </p>
  <p>
   To make it more realistic, we used a regular telephone as our microphone
for input into the ADC. We did not use external phone lines because
we did not want to deal with ringing circuitry and there is no phone line
access in the EE lab.
  </p>
  <p>
   Due to budget restraints, we ordered a 128kx8 SRAM from digikey. &nbsp;With
the above sampling rate, this allows us to record and save 21.8 seconds (128ksam
/&nbsp;6000sam/sec = 21.8sec).
  </p>
  <p>
   We needed to order an external counter to address this much memory. To
sddress 128k memory locations, we need 17 bits.
  </p>
  <p>
   The 8 bit samples are sent to a DAC through a bus connected also to the
microcontroller and the SRAM. The DAC sends its output through an opamp
to a simple external speaker.
  </p>
  <p>
  </p>
  <p>
   <b>
    Testing Methods -
   </b>
  </p>
  <p>
   Realizing the amount of external hardware that would be interacting, we
approached our testing in several stages. We wrote individual test
codes for every external component (these codes are linked below).
  </p>
  <p>
   -Our first full test was to input voice and directly output it through the
DAC (the SRAM was bypassed on the bus).
   <br>
   -The second test was to record the voice into the SRAM and display the bits
on the LEDs.
   <br>
   -We automatically started and stopped recording using the analog comparator
on the green wire of the phone cord.
   <br>
   -Combining these we eventually built up our record and play functions.
   <br>
   -The delete function was then added.
   <br>
   -Implemented skip meant we needed memory management using dynamic tables
and flags.
   <br>
   -Fool-proofing our design involved finding remote errors that could occur
in extreme situations.
  </p>
  <p>
  </p>
  <p>
   <b>
    Results of the Design -
   </b>
  </p>
  <p>
   The answering machine can record up to our full 21 seconds and play it back
in clearly understandable output. We can record anywhere from one 21.8
second message to thirtytwo .68 second messages.
  </p>
  <p>
   Multiple messages are recorded one after another. Using the play button
will begin with the first message and play until the end of the last message.
  </p>
  <p>
   Cool Extra Features:
  </p>
  <ul>
   <li>
    Recording will stop automatically if the end of the SRAM is reached preventing
    circular overwriting.
   </li>
   <li>
    Play will stop and end of last message preventing extra garbage from being
    played.
   </li>
   <li>
    Skip will not play beyond last message.
   </li>
   <li>
    Play and skip will not work if there are no messages present.
   </li>
   <li>
    Picking up the phone during play will cease play and start recording at end
    of message queue.
   </li>
  </ul>
  <p>
  </p>
  <p>
   <b>
    Software Designed -
   </b>
  </p>
  <ul>
   <li>
    <a>
     Digital Answering Machine
    </a>
   </li>
   <li>
    <a>
     Include file
    </a>
   </li>
   <li>
    <a>
     Test DAC conversion
    </a>
   </li>
   <li>
    <a>
     Test Counter
    </a>
   </li>
   <li>
    <a>
     Test RAM
    </a>
   </li>
  </ul>
  <p>
  </p>
  <p>
   <b>
    Answering Machine Schematic (and pics) -
   </b>
  </p>
  <ul>
   <li>
    <a>
     Schematic
    </a>
   </li>
   <li>
    <a>
     Full view of layout
    </a>
   </li>
   <li>
    <a>
     Close-up of surface mount contraption
    </a>
   </li>
  </ul>
  <p>
   <a>
   </a>
  </p>
  <p>
   <b>
    Spec Sheets and References
   </b>
  </p>
  <ul>
   <li>
    <a>
     ram
    spec
    </a>
   </li>
   <li>
    <a>
     counter
    spec
    </a>
   </li>
   <li>
    <a>
     8535
    spec
    </a>
   </li>
   <li>
    <a>
    </a>
    <a>
     howstuffworks.com
    </a>
   </li>
  </ul>
  <p>
  </p>
  <p>
   <b>
    What We Would Do Differently
   </b>
  </p>
  <p>
   We would order a counter and RAM that was not surface mount. In order
to make these chips usable we made an interesting contraption.
  </p>
  <p>
   We would implement the debouncing of the input capture from the beginning
to facillitate testing. &nbsp;Getting a clean pickup and hangup of the phone
caused many problems.
  </p>
  <p>
  </p>
  <p>
   <b>
    Extensions
   </b>
  </p>
  <dl>
   <dd>
    We thought of many extensions to this project if we had more time.
   </dd>
  </dl>
  <ol>
   <li>
    Use serial interface with computer for larger storage capabilities (but we
    prefer the stand-alone approach not dependant on the computer).
   </li>
   <li>
    We would have liked to implement more powerful memory management. Currently, our delete is an all-or-nothing format.
   </li>
   <li>
    Interface with the phone network w/ ringer circuitry to answer real phone
    company calls. &nbsp;An intro message would then be appropriate.
   </li>
   <li>
    Adding beeps between messages for distiction.
   </li>
  </ol>
  <h4>
   Email
  </h4>
  <p>
   <a>
    edm5@cornell.edu
   </a>
   or
   <a>
    bpg3@cornell.edu
   </a>
  </p>
  <p>
  </p>
  <p>
  </p>
 </body>
</html>
